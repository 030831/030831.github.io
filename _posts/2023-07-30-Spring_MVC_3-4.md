---
layout: post
title: "9. ìŠ¤í”„ë§ MVC - ì›¹ í˜ì´ì§€ ë§Œë“¤ê¸°"
categories: Gaounuri_Spring_Study
---
[Project Code File](https://github.com/030831/Java_Project/tree/master/item-service)

> ### ğŸ“Œ ëª©ì°¨

* ìƒí’ˆ ë„ë©”ì¸ ê°œë°œ
* ìƒí’ˆ ì„œë¹„ìŠ¤ `HTML`
* ìƒí’ˆ ëª©ë¡ - íƒ€ì„ë¦¬í”„
* ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬ - `@ModelAttribute`
* `PRG` - `Post/Redirect/Get`
* `RedirectAttributes`

> #### ğŸ“Œ ê°œìš”

ìƒí’ˆì„ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•´ë³´ì.

ìƒí’ˆ ë„ë©”ì¸ ëª¨ë¸ì—ëŠ” ì´ 4ê°€ì§€ íŠ¹ì„±ì´ ì¡´ì¬í•œë‹¤.

* ìƒí’ˆ `ID` , ìƒí’ˆëª… , ê°€ê²© , ìˆ˜ëŸ‰

ìƒí’ˆê´€ë¦¬ê¸°ëŠ¥ì—ë„ ì´ **4ê°€ì§€ ê¸°ëŠ¥**ì´ ì¡´ì¬í•œë‹¤.


* ### ìƒí’ˆ ëª©ë¡ 

![image](https://github.com/030831/030831.github.io/assets/101914089/9bd2f237-124a-4cef-8044-0938d823de7d)

* ### ìƒí’ˆ ìƒì„¸

![image](https://github.com/030831/030831.github.io/assets/101914089/b7018070-9151-4392-9a52-36aa042d7e88)

* ### ìƒí’ˆ ìˆ˜ì •

![image](https://github.com/030831/030831.github.io/assets/101914089/d411dbd9-0f1f-434f-90f7-ed8b121bd3d5)

* ### ìƒí’ˆ ë“±ë¡

![image](https://github.com/030831/030831.github.io/assets/101914089/7b57a150-5626-41f3-9414-febf0be29d92)

* ### ì„œë¹„ìŠ¤ ì œê³µ íë¦„

![image](https://github.com/030831/030831.github.io/assets/101914089/2ac5b2db-817f-4980-9666-dfe15d31ff66)

ì„œë¹„ìŠ¤ ì œê³µ íë¦„ì€ ìœ„ ê·¸ë¦¼ê³¼ ê°™ë‹¤. ìŠ¤í”„ë§ `MVC` íŒ¨í„´ì„ ì‚¬ìš©í•˜ê³  ëª©ë¡ , ë“±ë¡ , ìƒíƒœ , ìˆ˜ì • , ì €ì¥ ì— ëŒ€í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ê°œë°œí•´ì„œ ë·°ë¥¼ í˜¸ì¶œí•œë‹¤. `HTML` ê³¼ `Thymeleaf` ë¥¼ í†µí•´ ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì œê³µí•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

ë°ì´í„° ë² ì´ìŠ¤ëŠ” ë”°ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

> ### ğŸ“Œ ìƒí’ˆ ë„ë©”ì¸ ê°œë°œ

```java
package hello.itemservice.domain.item;

@Data
public class Item {
    private Long id;
    private String itemName;
    private Integer price; // ê°€ê²©ì´ ì—†ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— Integer , nullable
    private Integer quantity;

    public Item() {
    }

    public Item(String itemName, Integer price, Integer quantity) {
        this.itemName = itemName;
        this.price = price;
        this.quantity = quantity;
    }
}
```

ìƒí’ˆ ê°ì²´ ì½”ë“œëŠ” ìœ„ì™€ ê°™ë‹¤.
`@Data` ì—ë…¸í…Œì´ì…˜ì€ `lombok` ì— ìˆëŠ”ê±¸ ì‚¬ìš©í•˜ì˜€ë‹¤.
`id , price , quantity` ëŠ” ì—†ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— `Long , Integer` ë¡œ ì„ ì–¸í•´ì£¼ì—ˆë‹¤.
ê¸°ë³¸ìƒì„±ìì™€ ê°’ì„ë„£ì„ìˆ˜ ìˆëŠ” ìƒì„±ì 2ê°œë¥¼ ë§Œë“¤ì—ˆë‹¤.

```java
package hello.itemservice.domain.item;

@Repository
public class ItemRepository { // ctrl+shift+T -> test code ìƒì„±

    private static final Map<Long, Item> store = new HashMap<>(); // ë©€í‹°ì“°ë ˆìŠ¤ í™˜ê²½ì—ì„   ConcurrentHashMap<>() ì‚¬ìš©
    private static long sequence = 0L; // ë©€í‹° ì“°ë ˆë“œ í™˜ê²½ì—ì„  AtomicLong ì‚¬ìš©

    public Item save(Item item) {
        item.setId(++sequence);
        store.put(item.getId(), item);
        return item;
    }

    public Item findById(Long id) {
        return store.get(id);
    }

    public List<Item> findAll() {
        return new ArrayList<>(store.values());
        // í•œë²ˆ ê°ì‹¸ì„œ ë°˜í™˜í•˜ë©´ ArrayList ì— ê°’ì„ ì¶”ê°€í•´ë„ ì‹¤ì œ storeì—ëŠ” ë³€ê²½ X
    }

    public void update(Long itemId , Item updateParam) {
        Item findItem = findById(itemId);
        findItem.setItemName(updateParam.getItemName());
        findItem.setPrice(updateParam.getPrice());
        findItem.setQuantity(updateParam.getQuantity());
        // ê·œëª¨ê°€ ì»¤ì§ˆì‹œ íŒŒë¼ë¯¸í„°ë¥¼ ì €ì¥í•  í´ë˜ìŠ¤ë¥¼ ì„¤ê³„í•´ì•¼í•¨.
    }

    public void clearStore() {
        store.clear(); // test ìš©
    }
}
```

ìƒí’ˆ ì €ì¥ì†Œì˜ ì½”ë“œëŠ” ìœ„ì™€ê°™ë‹¤.
`Map<Long , Item> store` ë¡œ ìƒí’ˆì˜ `ID` ì™€ ê°ì²´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
ê·¸ë¦¬ê³  `ID` ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ `sequence` ë³€ìˆ˜ë¥¼ ë§Œë“¤ì—ˆë‹¤.

ë©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œëŠ” ê°ê° `ConcurrentHashMap , AtomicLong` ì„ ì‚¬ìš©í•œë‹¤ëŠ”ê²ƒì„ ì•Œì•„ë‘ì.

ë©”ì„œë“œëŠ” ìƒí’ˆ ì €ì¥ , `ID` ë¡œ ì°¾ê¸° , ì „ì²´ ì°¾ê¸° , ì—…ë°ì´íŠ¸ê°€ ìˆë‹¤.

```java
package hello.itemservice.domain.item;

class ItemRepositoryTest {

    ItemRepository itemRepository = new ItemRepository();

    @AfterEach
    void afterEach() {
        itemRepository.clearStore();
    }

    @Test
    void save() {
        //given
        Item item = new Item("itemA", 10000, 10);

        //when
        Item saveItem = itemRepository.save(item);

        //then
        Item findItem = itemRepository.findById(item.getId());
        assertThat(findItem).isEqualTo(saveItem);
    }

    @Test
    void findAll() {
        //given
        Item item1 = new Item("item1", 10000, 10);
        Item item2 = new Item("item2", 20000, 20);

        itemRepository.save(item1);
        itemRepository.save(item2);
        //when
        List<Item> result = itemRepository.findAll();

        //then
        assertThat(result.size()).isEqualTo(2);
        assertThat(result).contains(item1, item2);
    }

    @Test
    void updateItem() {
        //given
        Item item = new Item("item1", 10000, 10);

        Item savedItem = itemRepository.save(item);
        Long itemId = savedItem.getId();
        //when

        Item updateParam = new Item("item2", 20000, 30);
        itemRepository.update(itemId, updateParam);


        //then
        Item findItem = itemRepository.findById(itemId);
        assertThat(findItem.getItemName()).isEqualTo(updateParam.getItemName());
        assertThat(findItem.getPrice()).isEqualTo(updateParam.getPrice());
        assertThat(findItem.getQuantity()).isEqualTo(updateParam.getQuantity());
    }
}
```
í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ìœ„ì™€ê°™ë‹¤. `@AfterEach` ë¥¼ í†µí•´ ë§¤ë²ˆ í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ì €ì¥ì†Œë¥¼ ì´ˆê¸°í™” í•´ì¤€ë‹¤.
ì €ì¥ , ì „ì²´ì°¾ê¸° , ì—…ë°ì´íŠ¸ì— ëŒ€í•´ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ì£¼ì—ˆë‹¤.

> #### ğŸ“Œ ìƒí’ˆ ì„œë¹„ìŠ¤ HTML

`HTML` ì„ í¸ë¦¬í•˜ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ ë¶€íŠ¸ìŠ¤íŠ¸ë©ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.

[ë‹¤ìš´ë¡œë“œ ë§í¬](https://getbootstrap.com/docs/5.0/getting-started/download/) ì— ë“¤ì–´ê°€ì„œ `Compiled CSS and JS` í•­ëª©ì— ë‹¤ìš´ë¡œë“œ í•´ì£¼ê³  `bootstrap.min.css` íŒŒì¼ì„ `resources/static/css/bootstrap.min.css` ê²½ë¡œì— ì¶”ê°€í•´ì£¼ì—ˆë‹¤.

`html` ì½”ë“œ ì–‘ì´ ë§¤ìš° ë§ê¸° ë•Œë¬¸ì— ê¸€ì—ì„œëŠ” ì½”ë“œë¥¼ ë„£ì§€ ì•Šê³  [ì—¬ê¸°](https://github.com/030831/Java_Project/tree/master/item-service/src/main/resources/static/html) ì— ì½”ë“œë¥¼ ì²¨ë¶€í•˜ê² ë‹¤.

> #### ğŸ“Œ ìƒí’ˆ ëª©ë¡ - íƒ€ì„ë¦¬í”„

ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ë·° í…œí”Œë¦¿ì„ ê°œë°œí•´ë³´ì.

ë¨¼ì € íƒ€ì„ë¦¬í”„ì˜ ë¬¸ë²•ì„ ëª‡ê°€ì§€ ì‚´í‘œë³´ì.

```html
<html xmlns:th="http://www.thymeleaf.org">
  ```
  
íƒ€ì„ë¦¬í”„ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ìœ„ ì½”ë“œë¥¼ ëª…ì‹œí•´ì¤˜ì•¼í•œë‹¤.

```html
th:href="@{/css/bootstrap.min.css}"
```
ì†ì„±ì„ ë³€ê²½í• ë ¤ë©´ `th:href` ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ ì†ì„±ì€ ì•„ê¹Œ ë¶€íˆ¬ìŠ¤íŠ¸ë©ì—ì„œ ë‹¤ìš´í•œ `css` íŒŒì¼ì˜ ë‚´ìš©ì´ ë‹´ê²¨ìˆë‹¤.

íƒ€ì„ë¦¬í”„ì˜ í•µì‹¬ì€ `th:` ê°€ ë¶™ì€ ë¶€ë¶„ì€ ì„œë²„ì‚¬ì´ë“œì—ì„œ ë Œë”ë§ë˜ê³  ê¸°ì¡´ê²ƒì„ ëŒ€ì²´í•œë‹¤ëŠ” ì ì´ë‹¤.
`th:` ê°€ ì—†ìœ¼ë©´ ê¸°ì¡´ `html` ì˜ ì†ì„±ì´ ì ìš©ëœë‹¤.

```html
th:href="@{/css/bootstrap.min.css}"
```
íƒ€ì„ë¦¬í”„ì—ì„œ `URL` ë§í¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° `@{...}` ì„ ì‚¬ìš©í•œë‹¤.

```html
onclick="location.href='addForm.html'"
th:onclick="|location.href='@{/basic/items/add}'|"
```
`onclick` ì€ ë²„íŠ¼ í´ë¦­ì„ ì˜ë¯¸í•œë‹¤. ì´ë•Œ ë¦¬í„°ëŸ´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.

ë¦¬í„°ëŸ´ ë¬¸ë²•ì€ `|...|` ì´ë ‡ê²Œ ì‚¬ìš©í•œë‹¤.

```html
<span th:text="'Welcome to our application, ' + ${user.name} + '!'">
```

ë¬¸ìì—´ê³¼ ë°ì´í„°ë¥¼ ê°™ì´ì“¸ë ¤ë©´ ì›ë˜ ìœ„ì™€ê°™ì´ ì‚¬ìš©í•´ì•¼í•œë‹¤.

```html
<span th:text="|Welcome to our application, ${user.name}!|">
```

í•˜ì§€ë§Œ ë¦¬í„°ëŸ´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ë©´ ê¹”ë”í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤

```html
<tr th:each="item : ${items}">
```

ë°˜ë³µ ì¶œë ¥ì€ ìœ„ ë¬¸ë²•ì„ ì‚¬ìš©í•œë‹¤.

```html
<td th:text="${item.price}">10000</td>
```
ë³€ìˆ˜ë¥¼ í‘œí˜„í• ë•ŒëŠ” `${...}` ì²˜ëŸ¼ ì‚¬ìš©í•œë‹¤.
ì´ë•Œ `item.price` ëŠ” ìë°”ì˜ í”„ë¡œí¼í‹° ì ‘ê·¼ë²•ì— ì˜í•´ `item.getPrice()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.

```html
<td th:text="${item.price}">10000</td>
```
í…ìŠ¤íŠ¸ì˜ ë‚´ìš©ì„ ë³€ê²½í• ë•ŒëŠ” `th:text` ì˜ ë¬¸ë²•ì„ ì‚¬ìš©í•œë‹¤.
ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ì—ì„œ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìœ¼ë©´ ê·¸ ê°’ì„ `10000` ëŒ€ì‹  ëŒ€ì²´í•´ì¤€ë‹¤.

```html
th:href="@{/basic/items/{itemId}(itemId=${item.id})}"
```
`URL` ë§í¬ë¥¼ í‘œí˜„í• ë•Œ ìœ„ì²˜ëŸ¼ `PathVariable` í˜•ì‹ìœ¼ë¡œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
`,` ë¥¼ í†µí•´ì„œ ` query='test'` ê°™ì´ ì¿¼ë¦¬íŒŒë¼ë¯¸í„°ë„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

íƒ€ì„ë¦¬í”„ì˜ ì¥ì ì€ `JSP` ì™€ëŠ” ë‹¬ë¦¬ ìˆœìˆ˜ `HTML` ì„ ìœ ì§€í•˜ë©´ì„œ ë·° í…œí”Œë¦¿ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì§•ì„ **ë„¤ì¸„ëŸ´ í…œí”Œë¦¿** `natural templates` ì´ë¼ê³  í•œë‹¤.

```java
@Controller
@RequestMapping("/basic/items")
@RequiredArgsConstructor // itemRepository DI
public class BasicItemController {

    private final ItemRepository itemRepository;
```
ê¸°ë³¸ì ì¸ ì½”ë“œëŠ” ìœ„ì™€ê°™ë‹¤. `@RequiredArgsConstructor` ì—ë…¸í…Œì´ì…˜ì„ í†µí•´ ì˜ì¡´ì„± ì£¼ì…ì„ í•´ì£¼ì—ˆë‹¤.

> #### ğŸ“Œ ìƒí’ˆ ë“±ë¡ ì²˜ë¦¬ - @ModelAttribute

ìƒí’ˆë“±ë¡ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì–´ ë³´ì. ìš”ì²­íŒŒë¼ë¯¸í„° í˜•ì‹ì´ë¯€ë¡œ `@RequestParam` ì„ ì‚¬ìš©í•œë‹¤.


```java
@PostMapping("/add")
public String addItemV1(@RequestParam String itemName, @RequestParam int price,
    @RequestParam Integer quantity, Model model) {
    Item item = new Item();
    item.setItemName(itemName);
    item.setPrice(price);
    item.setQuantity(quantity);

    itemRepository.save(item);

    model.addAttribute("item", item);

    return "basic/item";
}
```

ê°€ì¥ ê¸°ë³¸ì ì¸ ì½”ë“œëŠ” ìœ„ì™€ê°™ë‹¤. `@RequestParam` ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¨ í›„ì— `model` ì—ë‹¤ê°€ `Item` ê°ì²´ë¥¼ ì €ì¥í•´ì¤€ë‹¤.

```java
@PostMapping("/add")
public String addItemV2(@ModelAttribute("item") Item item) {
    itemRepository.save(item);
	model.addAttribute("item", item); // ì¬ë™ ì¶”ê°€ê°€ ë˜ê¸° ë–„ë¬¸ì— ìƒëµ ê°€ëŠ¥
    return "basic/item";
}
```

`@ModelAttribute` ì—ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í–ˆë‹¤. ì´ë•Œ `@ModelAttribute` ë¡œ ì¸í•´ `Item` ê°ì²´ë¥¼ ìƒì„±í•˜ê³  í”„ë¡œí¼í‹°ì ‘ê·¼ë²• `setXxx` ë¥¼ í†µí•´ ë°ì´í„° ê°’ì„ ì•Œì•„ì„œ ë„£ì–´ì¤€ë‹¤.

ë§Œì•½ `@ModelAttirubte` ì— ë¬¸ìì—´ë¡œ ê°ì²´ ì´ë¦„ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ í´ë˜ìŠ¤ ì´ë¦„ì—ì„œ ì²«ë²ˆì§¸ ê¸€ìë¥¼ ì†Œë¬¸ìë¡œ ë°”ê¾¸ê³  ëª¨ë¸ì— ì €ì¥í•´ì¤€ë‹¤.

```java
@PostMapping("/add")
public String addItemV4(Item item) { // ê°ì²´ì¼ë•ŒëŠ” ModelAttribute ìƒëµ ê°€ëŠ¥.
	itemRepository.save(item);
	return "basic/item";
}
```

ë˜í•œ ìŠ¤í”„ë§ì—ì„œëŠ” ê°ì²´ë¥¼ íŒŒë¼ë¯¸í„°ì— ë„£ì„ì‹œ ìë™ìœ¼ë¡œ `@ModelAttribute` ê°€ ë“±ë¡ëœë‹¤.
ë‹¤ë§Œ ëª…ì‹œì„±ì´ ì¡°ê¸ˆ ë–¨ì–´ì§„ë‹¤.

```java
@GetMapping("/{itemId}/edit")
public String editFrom(@PathVariable Long itemId, Model model) {
    Item item = itemRepository.findById(itemId);
    model.addAttribute("item", item);
    return "basic/editForm";
}
```

ìƒí’ˆ ìˆ˜ì • ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ìœ„ì™€ê°™ë‹¤. `@PathVariable` ì—ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.
`Get` ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í–ˆë‹¤. ê·¸ ì´ìœ ëŠ” ì§ì ‘ ìƒí’ˆì„ ìˆ˜ì •í•˜ëŠ ì½”ë“œê°€ ì•„ë‹ˆë¼ ìƒí’ˆìˆ˜ì • `HTML` ì´ ìˆëŠ” í™”ë©´ìœ¼ë¡œ ì´ë™ì‹œì¼œ ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.

```java
@PostMapping("/{itemId}/edit")
public String edit(@PathVariable Long itemId, @ModelAttribute Item item) {
    itemRepository.update(itemId, item);
    return "redirect:/basic/items/{itemId}"; // ë¦¬ë‹¤ì´ë ‰íŠ¸
}
```

ì‹¤ì œ ìƒí’ˆ ìˆ˜ì •ì€ ìœ„ ì½”ë“œì— ì˜í•´ ìˆ˜í–‰ëœë‹¤. ë¦¬ë‹¤ì´ë ‰íŠ¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì˜€ë‹¤.


> #### ğŸ“Œ PRG Post/Redirect/Get 

ì§€ê¸ˆê¹Œì§€ ì‚¬ìš©í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì‹¤ì œë¡œ ìƒí’ˆì„ ì¶”ê°€í•˜ë©´ ì‹¬ê°í•œ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
ìƒí’ˆ ë“±ë¡ì„ ì™„ë£Œí•œ ìƒíƒœì—ì„œ **ìƒˆë¡œê³ ì¹¨ì„ í•˜ë©´ ê³„ì†í•´ì„œ ë“±ë¡ì´ ëœë‹¤.**

![image](https://github.com/030831/030831.github.io/assets/101914089/3c768580-02c5-4129-bff7-b647b576e16d)

ê·¸ ì´ìœ ëŠ” ìƒí’ˆë“±ë¡í¼ì—ì„œ ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê³  ì €ì¥ì„ í•˜ë©´ `POST /add` + ìƒí’ˆë°ì´í„°ë¥¼ ì„œë²„ë¡œ ì „ì†¡í•˜ê²Œ ë˜ëŠ”ë° ì´ ìƒíƒœì—ì„œ ìƒˆë¡œê³ ì¹¨ì‹œ ë˜ `POST` ë¥¼ í•´ë²„ë¦¬ê²Œ ëœë‹¤.

![image](https://github.com/030831/030831.github.io/assets/101914089/e7e2c45e-c780-435d-a17c-0ca86e93e00a)

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ìƒí’ˆ ì €ì¥í›„ì— ë·° í…œí”Œë¦¿ìœ¼ë¡œ ì´ë™í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ìƒí’ˆ ìƒì„¸ í™”ë©´ë§í¬ë¡œ **ë¦¬ë‹¤ì´ë ‰íŠ¸**ë¥¼ í•´ì£¼ë©´ ëœë‹¤.

```java
//    @PostMapping("/add")
public String addItemV5(Item item) {
    itemRepository.save(item);
    return "redirect:/basic/items/" + item.getId();
}
```

ë”°ë¼ì„œ ê¸°ì¡´ì— `return basic/item` ì„ ìœ„ì²˜ëŸ¼ ë°”ê¿”ì£¼ë©´ ëœë‹¤.

> #### ğŸ“Œ RedirectAttributes

í•œê°€ì§€ ê¸°ëŠ¥ì„ ë” ì¶”ê°€í•´ë³´ì.
ìƒí’ˆì„ ì €ì¥í•˜ê³  ìƒí’ˆ ìƒì„¸í™”ë©´ì—ì„œ ê³ ê°ì…ì¥ì—ì„œëŠ” ì œëŒ€ë¡œ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸ì„ í•  ìˆ˜ ì—†ë‹¤.
ì´ë¥¼ ìœ„í•´ "ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤" ë¬¸êµ¬ë¥¼ ì¶”ê°€í•´ë³´ì.

```java
@PostMapping("/add")
public String addItemV6(Item item , RedirectAttributes redirectAttributes) {
    Item savedItem = itemRepository.save(item);
    redirectAttributes.addAttribute("itemId", savedItem.getId());
    redirectAttributes.addAttribute("status", true);
    return "redirect:/basic/items/{itemId}";
}
```

ì´ì „ì— `return` ì—ì„œ `item.getId` ë¥¼ ë”í•´ì£¼ì—ˆëŠ”ë° ì˜ëª»í•˜ë©´ íŠ¹ìˆ˜ë¬¸ìë‚˜ ê³µë°±ìœ¼ë¡œ ì¸í•´ ê²½ë¡œë¥¼ ì¸ì‹í•˜ì§€ ëª»í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ `RedirectAttributes` ì„ ì‚¬ìš©í•œë‹¤.
`RedirectAttributes` ëŠ” ìë™ìœ¼ë¡œ `URL` ì¸ì½”ë”©ì„ ëŒ€ì‹  í•´ì¤€ë‹¤.
ë˜í•œ ì œëŒ€ë¡œ ì €ì¥ëœê²ƒì„ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ `status` ì •ë³´ë¥¼ `true` ë¡œ ì €ì¥í•´ì¤€ë‹¤.
ê·¸ë¦¬ê³  ë°˜í™˜ê°’ì€ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¡œ í•´ë‹¹ ìƒí’ˆì˜ ë²ˆí˜¸ë¥¼ `URL` ê²½ë¡œì— ë„£ì–´ì¤€ë‹¤.

ì´ì œ `resources/templates/basic/item.html` ê²½ë¡œì— ìˆëŠ” `HTML` ì½”ë“œì— 
```HTML
<h2 th:if="${param.status}" th:text="'ì €ì¥ ì™„ë£Œ!'"></h2>
```

ìœ„ì™€ê°™ì€ ë¬¸êµ¬ë¥¼ ì¶”ê°€í•´ì£¼ë©´ 

![image](https://github.com/030831/030831.github.io/assets/101914089/64ee24a1-d4e7-4eb8-93ba-210580fd4913)

ê¸€ìê°€ ì œëŒ€ë¡œ ë‚˜ì˜¤ëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
